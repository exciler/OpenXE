import{a as L}from"../axios-Cm0UX6qg.js";import{A as E}from"../userParameter-DRrWXyuO.js";const T="collapsed",f="active",A="#sidebar",q=".sidebar-toggle",p=".list-item",k=".sidebar-submenu div",M="ontouchstart"in window;let m=null;function j(){H()}function H(){var e;(e=document.querySelector(q))==null||e.addEventListener("click",I),document.querySelectorAll(p).forEach(t=>{M?t.addEventListener("click",s=>{let i=s.target;document.querySelectorAll(p+" ."+f).forEach(a=>w(a)),v(i)}):(t.addEventListener("mouseenter",s=>v(s.target)),t.addEventListener("mouseleave",s=>w(s.target)))})}function I(){const e=document.querySelector(A);m=(e==null?void 0:e.classList.toggle(T))??!1,R()}function v(e){e.classList.add(f);const t=e.querySelector(k);if(t===null)return;const s=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=Math.max(Math.min(window.innerHeight-s.top-i.height,0),-s.top);t.style.top=a+"px",i.height>window.innerHeight&&(t.style.height=window.innerHeight+"px",t.style.overflow="scroll")}function w(e){e.classList.remove(f)}function R(){m!==null&&L.post("index.php?module=ajax&action=sidebar&cmd=set_collapsed&value="+m).catch(console.log)}$(function(){let e;var t=$("#main"),s=$("#header"),i=$("#sidebar"),a=$(".sidebar-toggle"),d,x=s.outerHeight();$(window).on("scroll",function(){d=$(this).scrollTop(),d>0&&i.hasClass("collapsed")?a.hide():a.show(),d>=x&&window.matchMedia("(min-width: 1000px)").matches?t.addClass("fixed"):t.removeClass("fixed")});function h(o){g.matches?e=!1:e=!0}var g=window.matchMedia("(min-width: 1000px)");h(),g.addListener(h);var n={menu:$("#mainmenu"),fullw:0},l={menu:$("#submenu"),fullw:0};n.menu.attr("data-items",n.menu.children().length),l.menu.attr("data-items",l.menu.children().length);function c(o){var b=0,r=o.menu;r.children().outerWidth(function(y,u){b+=u+1},!0),b>=r.width()&&(o.fullw==0&&r.children().outerWidth(function(y,u){o.fullw+=u+1},!0),r.addClass("merged")),o.fullw!=0&&r.width()>=o.fullw&&r.removeClass("merged")}e||(c(n),c(l)),$(window).on("resize",function(){e?(n.menu.removeClass("merged"),l.menu.removeClass("merged")):(c(n),c(l))}),$menuOpener=$("#header .menu-opener"),$closem=$(".close-mobile"),$menuOpener.on("click",function(){n.menu.toggleClass("fixed"),$closem.addClass("display"),$("body").css("overflow","hidden")}),n.menu.find(" > li > a").on("click",function(){l.menu.removeClass("fixed"),$(this).siblings("ul.submenu").addClass("fixed"),n.menu.find(" > li").removeClass("show").addClass("mobilehide"),$(this).parent().removeClass("mobilehide").addClass("show")}),$(".menu-wrapper").on("click",".close-mobile",function(){n.menu.removeClass("fixed").find("ul.submenu").removeClass("fixed"),n.menu.find(" > li").removeClass("mobilehide").removeClass("show"),$(this).removeClass("display"),$("body").css("overflow","visible")})});const O="#profile-menu",P="#profile-info-name",B="#profile-info-wrapper, #profile-picture-wrapper",S=["click","touch"];document.querySelectorAll(B).forEach(e=>{S.forEach(t=>e.addEventListener(t,s=>{s.stopPropagation(),C()}))});S.forEach(e=>document.addEventListener(e,()=>C(!1)));function C(e){var t,s;e=(t=document.querySelector(O))==null?void 0:t.classList.toggle("visible",e),(s=document.querySelector(P))==null||s.classList.toggle("menu-visible",e)}$("#tabs").tabs();document.querySelectorAll("#tabs ul.ui-tabs-nav li a").forEach(e=>{if(e.textContent===""){const t=e.parentElement;t.classList.toggle("active",!1),t.style.background="transparent",t.style.backgroundColor="transparent"}});$("#tabs").find("div.ui-tabs-panel:visible table.defferloading").each(function(){$(this).toggleClass("defferloading",!1),$(this).dataTable().fnSettings().sAjaxSource=$(this).dataTable().fnSettings().sAjaxSource.replace("&deferLoading=1",""),$(this).DataTable().ajax.reload()});$("#tabs").on("tabsactivate",function(e,t){var s;$("#tabs").find("div.ui-tabs-panel:visible table.defferloading").each(function(){$(this).toggleClass("defferloading",!1),$(this).dataTable().fnSettings().sAjaxSource=$(this).dataTable().fnSettings().sAjaxSource.replace("&deferLoading=1",""),$(this).DataTable().ajax.reload()}),(s=document.querySelector("#tabs"))==null||s.dispatchEvent(new Event("tabs-activate"))});window.AutoSaveUserParameter=E;j();
