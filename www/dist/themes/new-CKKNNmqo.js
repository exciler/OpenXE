import{a as L}from"../axios-Cm0UX6qg.js";const E="collapsed",m="active",T="#sidebar",k=".sidebar-toggle",p=".list-item",q=".sidebar-submenu div",A="ontouchstart"in window;let f=null;function M(){j()}function j(){var e;(e=document.querySelector(k))==null||e.addEventListener("click",H),document.querySelectorAll(p).forEach(t=>{A?t.addEventListener("click",s=>{let i=s.target;document.querySelectorAll(p+" ."+m).forEach(l=>w(l)),v(i)}):(t.addEventListener("mouseenter",s=>v(s.target)),t.addEventListener("mouseleave",s=>w(s.target)))})}function H(){const e=document.querySelector(T);f=(e==null?void 0:e.classList.toggle(E))??!1,I()}function v(e){e.classList.add(m);const t=e.querySelector(q);if(t===null)return;const s=e.getBoundingClientRect(),i=t.getBoundingClientRect(),l=Math.max(Math.min(window.innerHeight-s.top-i.height,0),-s.top);t.style.top=l+"px",i.height>window.innerHeight&&(t.style.height=window.innerHeight+"px",t.style.overflow="scroll")}function w(e){e.classList.remove(m)}function I(){f!==null&&L.post("index.php?module=ajax&action=sidebar&cmd=set_collapsed&value="+f).catch(console.log)}$(function(){let e;var t=$("#main"),s=$("#header"),i=$("#sidebar"),l=$(".sidebar-toggle"),d,x=s.outerHeight();$(window).on("scroll",function(){d=$(this).scrollTop(),d>0&&i.hasClass("collapsed")?l.hide():l.show(),d>=x&&window.matchMedia("(min-width: 1000px)").matches?t.addClass("fixed"):t.removeClass("fixed")});function h(o){g.matches?e=!1:e=!0}var g=window.matchMedia("(min-width: 1000px)");h(),g.addListener(h);var n={menu:$("#mainmenu"),fullw:0},a={menu:$("#submenu"),fullw:0};n.menu.attr("data-items",n.menu.children().length),a.menu.attr("data-items",a.menu.children().length);function c(o){var b=0,r=o.menu;r.children().outerWidth(function(y,u){b+=u+1},!0),b>=r.width()&&(o.fullw==0&&r.children().outerWidth(function(y,u){o.fullw+=u+1},!0),r.addClass("merged")),o.fullw!=0&&r.width()>=o.fullw&&r.removeClass("merged")}e||(c(n),c(a)),$(window).on("resize",function(){e?(n.menu.removeClass("merged"),a.menu.removeClass("merged")):(c(n),c(a))}),$menuOpener=$("#header .menu-opener"),$closem=$(".close-mobile"),$menuOpener.on("click",function(){n.menu.toggleClass("fixed"),$closem.addClass("display"),$("body").css("overflow","hidden")}),n.menu.find(" > li > a").on("click",function(){a.menu.removeClass("fixed"),$(this).siblings("ul.submenu").addClass("fixed"),n.menu.find(" > li").removeClass("show").addClass("mobilehide"),$(this).parent().removeClass("mobilehide").addClass("show")}),$(".menu-wrapper").on("click",".close-mobile",function(){n.menu.removeClass("fixed").find("ul.submenu").removeClass("fixed"),n.menu.find(" > li").removeClass("mobilehide").removeClass("show"),$(this).removeClass("display"),$("body").css("overflow","visible")})});const R="#profile-menu",O="#profile-info-name",B="#profile-info-wrapper, #profile-picture-wrapper",C=["click","touch"];document.querySelectorAll(B).forEach(e=>{C.forEach(t=>e.addEventListener(t,s=>{s.stopPropagation(),S()}))});C.forEach(e=>document.addEventListener(e,()=>S(!1)));function S(e){var t,s;e=(t=document.querySelector(R))==null?void 0:t.classList.toggle("visible",e),(s=document.querySelector(O))==null||s.classList.toggle("menu-visible",e)}$("#tabs").tabs();document.querySelectorAll("#tabs ul.ui-tabs-nav li a").forEach(e=>{if(e.textContent===""){const t=e.parentElement;t.classList.toggle("active",!1),t.style.background="transparent",t.style.backgroundColor="transparent"}});$("#tabs").find("div.ui-tabs-panel:visible table.defferloading").each(function(){$(this).toggleClass("defferloading",!1),$(this).dataTable().fnSettings().sAjaxSource=$(this).dataTable().fnSettings().sAjaxSource.replace("&deferLoading=1",""),$(this).DataTable().ajax.reload()});$("#tabs").on("tabsactivate",function(e,t){$("#tabs").find("div.ui-tabs-panel:visible table.defferloading").each(function(){$(this).toggleClass("defferloading",!1),$(this).dataTable().fnSettings().sAjaxSource=$(this).dataTable().fnSettings().sAjaxSource.replace("&deferLoading=1",""),$(this).DataTable().ajax.reload()})});M();
