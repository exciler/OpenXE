import{a as v}from"../axios-Cm0UX6qg.js";import{r as w}from"../jqueryBridge-CQYx4hBB.js";import{s as I}from"../index.esm-DJL5Ix50.js";import{s as A}from"../listbox.esm-CMRuu0Oj.js";import{a as _}from"../button.esm-CPeMIqfM.js";import{A as $}from"../ajaxErrorHandler-BwWU8vup.js";import{r as y,e as S,o as p,q as g,A as k,l as m,h as d,a as E,j as V,b as o,w as c,i as b,k as C,F as P,g as T,t as j,m as h,c as B}from"../vue-r8MBkmxb.js";import{_ as N}from"../AutoComplete.vue_vue_type_script_setup_true_lang-DW6rzfiE.js";import{s as U}from"../dropdown.esm-_2vV7CxE.js";import"../index.esm-CcsjVT0J.js";import"../index.esm-OnOy6NWm.js";import"../index.esm-DzkJW0oT.js";const F={key:0,class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},H=o("label",{for:"matrixProductOptions",style:{"padding-top":"5px"}},"Optionen:",-1),q={__name:"AddGlobalToArticle",props:{articleId:String},emits:["save","close"],setup(x,{emit:i}){const n=x,r=i,e=y(null);y(null);const s=y([]);S(async()=>{e.value=await fetch("index.php?module=matrixprodukt&action=list&cmd=selectoptions").then(t=>t.json())});async function u(){await v.post("index.php?module=matrixprodukt&action=artikel&cmd=addoptions",{articleId:n.articleId,optionIds:s.value}).then(()=>{r("save")}).catch($)}return(t,a)=>(p(),g(d(I),{visible:"",modal:"",header:"Globale Optionen hinzufügen",style:{width:"500px"},"onUpdate:visible":a[2]||(a[2]=l=>r("close"))},{footer:k(()=>[m(d(_),{label:"ABBRECHEN",onClick:a[1]||(a[1]=l=>r("close"))}),m(d(_),{label:"HINZUFÜGEN",onClick:u,disabled:s.value.length===0},null,8,["disabled"])]),default:k(()=>[e.value?(p(),E("div",F,[H,m(d(A),{multiple:"",options:e.value,optionGroupLabel:"name",optionGroupChildren:"options",optionLabel:"name",optionValue:"id",listStyle:"height: 200px",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l)},null,8,["options","modelValue"])])):V("",!0)]),_:1}))}},D={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},L=o("label",{for:"matrixProduct_group_name"},"Name:",-1),G=o("label",{for:"matrixProduct_group_nameExternal"},"Name Extern:",-1),R=o("label",{for:"matrixProduct_group_project"},"Projekt:",-1),z={key:0,for:"matrixProduct_group_sort"},O=o("label",{for:"matrixProduct_group_required"},"Pflicht:",-1),M=o("label",{for:"matrixProduct_group_active"},"Aktiv:",-1),W={__name:"GroupEdit",props:{groupId:String,articleId:String},emits:["save","close"],setup(x,{emit:i}){const n=x,r=i,e=y({});S(async()=>{if(n.groupId>0){const u=n.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=groupedit":"index.php?module=matrixprodukt&action=list&cmd=edit";e.value=await v.get(u,{params:n}).then(t=>t.data)}});async function s(){!parseInt(n.groupId)>0&&(e.value.groupId=0);const u=n.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=groupsave":"index.php?module=matrixprodukt&action=list&cmd=save";await v.post(u,{...n,...e.value}).catch($).then(()=>{r("save")})}return(u,t)=>(p(),g(d(I),{visible:"",modal:"",header:"Gruppe anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":t[7]||(t[7]=a=>r("close")),class:"p-fluid"},{footer:k(()=>[m(d(_),{label:"ABBRECHEN",onClick:t[6]||(t[6]=a=>r("close"))}),m(d(_),{label:"SPEICHERN",onClick:s,disabled:!e.value.name},null,8,["disabled"])]),default:k(()=>[o("div",D,[L,c(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>e.value.name=a),required:""},null,512),[[b,e.value.name]]),G,c(o("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>e.value.nameExternal=a)},null,512),[[b,e.value.nameExternal]]),R,m(N,{modelValue:e.value.project,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.project=a),optionLabel:a=>[a.abkuerzung,a.name].join(" "),ajaxFilter:"projektname",forceSelection:""},null,8,["modelValue","optionLabel"]),x.articleId?(p(),E("label",z,"Sortierung:")):V("",!0),x.articleId?c((p(),E("input",{key:1,type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>e.value.sort=a)},null,512)),[[b,e.value.sort]]):V("",!0),O,c(o("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=a=>e.value.required=a),class:"justify-self-start"},null,512),[[C,e.value.required]]),M,c(o("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>e.value.active=a),class:"justify-self-start"},null,512),[[C,e.value.active]])])]),_:1}))}},Z={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},J=o("label",{for:"matrixProduct_option_name"},"Name:",-1),K=o("label",{for:"matrixProduct_option_nameExternal"},"Name Extern:",-1),Q=o("label",{for:"matrixProduct_option_articleNumberSuffix"},"Artikelnummer-Suffix:",-1),X=o("label",{for:"matrixProduct_option_sort"},"Sortierung:",-1),Y=o("label",{for:"matrixProduct_option_active"},"Aktiv:",-1),ee={__name:"OptionEdit",props:{optionId:String,groupId:String,articleId:String},emits:["save","close"],setup(x,{emit:i}){const n=x,r=i,e=y({});S(async()=>{if(n.optionId>0){const u=n.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=optionedit":"index.php?module=matrixprodukt&action=optionenlist&cmd=edit";e.value=await v.get(u,{params:n}).then(t=>t.data)}});async function s(){const u=n.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=optionsave":"index.php?module=matrixprodukt&action=optionenlist&cmd=save";await v.post(u,{...n,...e.value}).then(()=>{r("save")}).catch($)}return(u,t)=>(p(),g(d(I),{visible:"",modal:"",header:"Option anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":t[6]||(t[6]=a=>r("close"))},{footer:k(()=>[m(d(_),{label:"ABBRECHEN",onClick:t[5]||(t[5]=a=>r("close"))}),m(d(_),{label:"SPEICHERN",onClick:s,disabled:!e.value.name},null,8,["disabled"])]),default:k(()=>[o("div",Z,[J,c(o("input",{id:"matrixProduct_option_name",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>e.value.name=a),required:""},null,512),[[b,e.value.name]]),K,c(o("input",{id:"matrixProduct_option_nameExternal",type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>e.value.nameExternal=a)},null,512),[[b,e.value.nameExternal]]),Q,c(o("input",{id:"matrixProduct_option_articleNumberSuffix",type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>e.value.articleNumberSuffix=a)},null,512),[[b,e.value.articleNumberSuffix]]),X,c(o("input",{id:"matrixProduct_option_sort",type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>e.value.sort=a)},null,512),[[b,e.value.sort]]),Y,c(o("input",{id:"matrixProduct_option_active",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=a=>e.value.active=a),class:"justify-self-start"},null,512),[[C,e.value.active]])])]),_:1}))}},te={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},ae=o("label",null,"Artikel",-1),oe={__name:"Variant",props:{articleId:String,variantId:String},emits:["save","close"],setup(x,{emit:i}){const n=x,r=i,e=y({});S(async()=>{e.value=await v.get("index.php?module=matrixprodukt&action=artikel&cmd=variantedit",{params:{...n}}).then(u=>({...n,...u.data}))});async function s(){await v.post("index.php?module=matrixprodukt&action=artikel&cmd=variantsave",{...n,...e.value}).catch($).then(()=>{r("save")})}return(u,t)=>(p(),g(d(I),{visible:"",modal:"",header:"Variante",style:{width:"500px"},"onUpdate:visible":t[2]||(t[2]=a=>r("close"))},{footer:k(()=>[m(d(_),{label:"ABBRECHEN",onClick:t[1]||(t[1]=a=>r("close"))}),m(d(_),{label:"SPEICHERN",onClick:s})]),default:k(()=>[o("div",te,[ae,m(N,{modelValue:e.value.variant,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.variant=a),optionLabel:a=>[a.nummer,a.name].join(" "),"ajax-filter":"artikelnummer",forceSelection:""},null,8,["modelValue","optionLabel"]),(p(!0),E(P,null,T(e.value.groups,a=>(p(),E(P,null,[o("label",null,j(a.name),1),m(d(U),{modelValue:a.selected,"onUpdate:modelValue":l=>a.selected=l,options:a.options,optionLabel:"name",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])],64))),256))])]),_:1}))}},le={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},ne=o("label",{for:"matrixProduct_nameFrom"},"DE Name:",-1),ie=o("label",{for:"matrixProduct_nameExternalFrom"},"DE Name Extern:",-1),re=o("label",{for:"matrixProduct_languageTo"},"Sprache:",-1),ue=o("label",{for:"matrixProduct_nameTo"},"Übersetzung Name:",-1),de=o("label",{for:"matrixProduct_nameTo"},"Übersetzung Name Extern:",-1),se=["required"],pe={__name:"Translation",props:{type:String,id:String},emits:["save","close"],setup(x,{emit:i}){const n=x,r=i,e=y({}),s=y([]);S(async()=>{if(n.id>0){const a="index.php?module=matrixprodukt&action=translation&cmd=edit";e.value=await v.get(a,{params:n}).then(l=>l.data)}v.get("index.php",{params:{module:"ajax",action:"filter",filtername:"activelanguages",object:!0}}).then(a=>{s.value=a.data})});async function u(){!parseInt(n.id)>0&&(e.value.id=0),await v.post("index.php?module=matrixprodukt&action=translation&cmd=save",{...n,...e.value}).catch($).then(()=>{r("save")})}function t(){return e.value.nameExternalFrom&&!e.value.nameExternalTo?!1:e.value.languageTo&&e.value.nameFrom&&e.value.nameTo}return(a,l)=>(p(),g(d(I),{visible:"",modal:"",header:"Übersetzung anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":l[6]||(l[6]=f=>r("close")),class:"p-fluid"},{footer:k(()=>[m(d(_),{label:"ABBRECHEN",onClick:l[5]||(l[5]=f=>r("close"))}),m(d(_),{label:"SPEICHERN",onClick:u,disabled:!t()},null,8,["disabled"])]),default:k(()=>[o("div",le,[ne,c(o("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=f=>e.value.nameFrom=f),required:""},null,512),[[b,e.value.nameFrom]]),ie,c(o("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=f=>e.value.nameExternalFrom=f)},null,512),[[b,e.value.nameExternalFrom]]),re,m(d(U),{modelValue:e.value.languageTo,"onUpdate:modelValue":l[2]||(l[2]=f=>e.value.languageTo=f),options:s.value,"option-label":"bezeichnung_de","option-value":"iso"},null,8,["modelValue","options"]),ue,c(o("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=f=>e.value.nameTo=f),required:""},null,512),[[b,e.value.nameTo]]),de,c(o("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=f=>e.value.nameExternalTo=f),required:e.value.nameExternalFrom},null,8,se),[[b,e.value.nameExternalTo]])])]),_:1}))}},me={__name:"App",setup(x){const i=y(null);document.getElementById("main").addEventListener("click",async s=>{const u=s.target;if(!u||!u.classList.contains("vueAction"))return;const t=u.dataset;if(t.action.endsWith("Delete")){if(!confirm("Wirklich löschen?"))return;let l;switch(t.action){case"groupDelete":l=t.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=groupdelete":"index.php?module=matrixprodukt&action=list&cmd=delete",await v.post(l,{groupId:t.groupId});break;case"optionDelete":l=t.articleId>0?"index.php?module=matrixprodukt&action=artikel&cmd=optiondelete":"index.php?module=matrixprodukt&action=optionenlist&cmd=delete",await v.post(l,{optionId:t.optionId});break;case"variantDelete":l="index.php?module=matrixprodukt&action=artikel&cmd=variantdelete",await v.post(l,{variantId:t.variantId});break;case"translationDelete":l="index.php?module=matrixprodukt&action=translation&cmd=delete",await v.post(l,{id:t.id,type:t.type});break}n();return}i.value=t});function n(){w(),e()}function r(){location.reload()}function e(){i.value=null}return(s,u)=>i.value?(p(),E(P,{key:0},[i.value.action==="addGlobalToArticle"?(p(),g(q,h({key:0},i.value,{onClose:e,onSave:r}),null,16)):i.value.action==="groupEdit"?(p(),g(W,h({key:1},i.value,{onClose:e,onSave:r}),null,16)):i.value.action==="optionEdit"?(p(),g(ee,h({key:2},i.value,{onClose:e,onSave:n}),null,16)):i.value.action==="variantEdit"?(p(),g(oe,h({key:3},i.value,{onClose:e,onSave:n}),null,16)):i.value.action==="translationEdit"?(p(),g(pe,h({key:4},i.value,{onClose:e,onSave:n}),null,16)):V("",!0)],64)):V("",!0)}};B(me).mount("#vueapp");
