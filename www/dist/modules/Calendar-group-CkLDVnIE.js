import{d as w,r as A,h as S,o as $,a as B,A as C,p as s,u as o,e as d,x as p,l as E,c as N}from"../vue-DC0yt6en.js";import{s as O}from"../index.esm-CSd3prbL.js";import{s as D,a as G,b as I}from"../multiselect.esm-Cjx0c_rh.js";import{s as L}from"../colorpicker.esm-Km-jUbKu.js";import{a as x}from"../button.esm-DaA8si6D.js";import{c as M}from"../vee-validate.esm-CDHvWIrO.js";import{a as h}from"../axios-Cm0UX6qg.js";import{A as g}from"../ajaxErrorHandler-BwWU8vup.js";import{r as y}from"../jqueryBridge-CQYx4hBB.js";import"../index.esm-DTA9bGEg.js";import"../index.esm-BPVgoXlU.js";import"../index.esm-DdDKNz7c.js";const W={class:"grid gap-1",style:{"grid-template-columns":"1fr 2fr"}},j=d("label",{for:"description"},"Bezeichnung:",-1),q=d("label",{for:"color"},"Farbe:",-1),z=d("label",{for:"active"},"Aktiv:",-1),H=d("label",{for:"members"},"Mitglieder",-1),K=w({__name:"CalendarGroupDialog",props:{id:{}},emits:["close","change"],setup(V,{emit:l}){const i=V,c=l,u={color:"#0B8092",members:[],active:!0},{defineField:n,handleSubmit:r,resetForm:k}=M(),[m]=n("name"),[f]=n("color"),[b]=n("active"),[v]=n("members"),_=A([]),F=a=>[a.mitarbeiternummer,a.name].join(" ");S(async()=>{await h.get("index.php?module=kalender&action=gruppenedit",{params:i}).then(a=>{const{memberOptions:e,...t}=a.data;_.value=e,k({values:{...u,...t}})}).catch(g)});const U=r(async a=>{a.color.startsWith("#")||(a.color="#"+a.color),await h.post("index.php?module=kalender&action=gruppensave",{...a,id:i.id}).then(()=>c("change")).catch(g)});return(a,e)=>($(),B(o(O),{visible:"",modal:"",header:"Kalendergruppe bearbeiten",style:{width:"600px"},"onUpdate:visible":e[5]||(e[5]=t=>c("close"))},{footer:C(()=>[s(o(x),{label:"Abbrechen",onClick:e[4]||(e[4]=t=>c("close"))}),s(o(x),{label:"Speichern",onClick:o(U)},null,8,["onClick"])]),default:C(()=>[d("div",W,[j,s(o(D),{modelValue:o(m),"onUpdate:modelValue":e[0]||(e[0]=t=>p(m)?m.value=t:null)},null,8,["modelValue"]),q,s(o(L),{modelValue:o(f),"onUpdate:modelValue":e[1]||(e[1]=t=>p(f)?f.value=t:null),"default-color":"#0B8092"},null,8,["modelValue"]),z,s(o(G),{modelValue:o(b),"onUpdate:modelValue":e[2]||(e[2]=t=>p(b)?b.value=t:null),binary:""},null,8,["modelValue"]),H,s(o(I),{modelValue:o(v),"onUpdate:modelValue":e[3]||(e[3]=t=>p(v)?v.value=t:null),display:"chip",filter:"",options:_.value,"option-label":F,"option-value":"id"},null,8,["modelValue","options"])])]),_:1}))}}),R=w({__name:"CalendarGroupApp",setup(V){var u;const l=A(null);(u=document.querySelector("#page_container"))==null||u.addEventListener("click",async n=>{const r=n.target.closest(".vue-action");if(r!==null)switch(r.dataset.action){case"create":l.value=0;break;case"edit":l.value=parseInt(r.dataset.id)||null;break;case"delete":confirm("Wirklich lÃ¶schen?")&&await h.post("index.php?module=kalender&action=gruppendelete",{id:parseInt(r.dataset.id)}).then(y).catch(g)}});function i(){l.value=null}function c(){y(),i()}return(n,r)=>l.value!==null?($(),B(K,{key:0,id:l.value,onClose:i,onChange:c},null,8,["id"])):E("",!0)}});N(R).mount("#vueapp");
