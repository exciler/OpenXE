var c=function(n){var o={storage:{},init:function(){n("#document_popup").dialog({modal:!0,autoOpen:!1,minWidth:800,title:"",buttons:{ABBRECHEN:function(){n(this).dialog("close")},SPEICHERN:function(){n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=savedocument",type:"POST",dataType:"json",data:{id:n("#document_id").val(),doctype:n("#document_doctype").val(),content:n("#document_content").val(),active:n("#document_active").prop("checked")?1:0,project:n("#document_project").val(),fontstyle:n("#document_fontstyle").val(),alignment:n("#document_alignment").val()},success:function(t){typeof t.status<"u"&&t.status==1?(n("#company_document_setting").DataTable().ajax.reload(),n("#document_popup").dialog("close")):alert(t.statusText)},beforeSend:function(){}})}},close:function(t,e){}}),o.registerEvents(),n("#translation_popup").dialog({modal:!0,autoOpen:!1,minWidth:800,title:"",buttons:{ABBRECHEN:function(){n(this).dialog("close")},SPEICHERN:function(){n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=savetranslation",type:"POST",dataType:"json",data:{parent_id:n("#document_id").val(),language:n("#language").val(),doctype:n("#document_doctype").val(),content:n("#translationcontent").val(),active:n("#active").prop("checked")?1:0,fontstyle:n("#document_translation_fontstyle").val(),alignment:n("#document_translation_alignment").val()},success:function(t){n("#translation_popup").dialog("close")},beforeSend:function(){}})}},close:function(t,e){}}),n("#language").on("change",function(){n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=loadtranslation",type:"POST",dataType:"json",data:{language:n(this).val(),parent_id:n("#document_id").val()},success:function(t){typeof t.id<"u"&&t.id!="0"&&(n("#active").prop("checked",t.active),n("#translationcontent").val(t.content),n("#document_translation_fontstyle").val(t.fontstyle),n("#document_translation_alignment").val(t.alignment))},beforeSend:function(){}})}),n("button.getelements").on("click",function(){n(n("#document_preview option:selected")).each(function(){var t=n("#document_content");(n(t).val()+"").indexOf("{"+n(this).val()+"}")<0&&n(t).val(n(t).val()+(n(t).val()+""==""?"":`
`)+n(this).text()+":|{"+n(this).val()+"}")})}),n("button.gettranslationelements").on("click",function(){n(n("#document_translation_preview option:selected")).each(function(){var t=n("#translationcontent");(n(t).val()+"").indexOf("{"+n(this).val()+"}")<0&&n(t).val(n(t).val()+(n(t).val()+""==""?"":`
`)+n(this).text()+":|{"+n(this).val()+"}")})}),n("img.translate").on("click",function(){o.openTranslation(n(this).data("document"))}),n("input.edit").on("click",function(){o.openDocument(n(this).data("id"))}),n("input#selectall").on("change",function(){n("#company_document_setting input:checkbox").prop("checked",n(this).prop("checked"))}),n("#doaction").on("click",function(){if(n("#actionselection").val()!==""&&n("#company_document_setting :checked").length){var t=[];n("#company_document_setting :checked").each(function(){t.push(n(this).val())}),n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=changestatus",type:"POST",dataType:"json",data:{action:n("#actionselection").val(),ids:t},success:function(e){n("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})}}),n("#document_doctype").on("change",function(){n("#document_preview option").each(function(){n(this).hasClass("doctype-"+n("#document_doctype").val())?n(this).show():n(this).hide()})})},registerEvents:function(){n(document).on("click",".companydocument-edit",function(t){t.preventDefault();var e=n(this).data("companydocumentId");o.openDocument(e)}),n(document).on("click",".companydocument-copy",function(t){t.preventDefault();var e=n(this).data("companydocumentId");o.copyInfoBlock(e)}),n(document).on("click",".companydocument-delete",function(t){t.preventDefault();var e=n(this).data("companydocumentId");o.deleteInfoBlock(e)})},openTranslation:function(t){n("#doctype").val(t),n("#language").trigger("change"),n("#translation_popup").dialog("open")},deleteInfoBlock:function(t){t&&confirm("Wirklich lÃ¶schen?")&&n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=deleteinfoblock",type:"POST",dataType:"json",data:{id:t},success:function(e){n("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})},copyInfoBlock:function(t){t&&confirm("Wirklich kopieren?")&&n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=copyinfoblock",type:"POST",dataType:"json",data:{id:t},success:function(e){n("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})},openDocument:function(t){n("#document_id").val(t),t?n("img#opentranlation").show():n("img#opentranlation").hide(),n.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=loaddocument",type:"POST",dataType:"json",data:{id:t},success:function(e){n("#document_active").prop("checked",e.active),n("#document_doctype").val(e.doctype),n("#document_content").val(e.content),n("#document_project").val(e.project),n("#document_fontstyle").val(e.fontstyle),n("#document_alignment").val(e.alignment),n("#document_preview option").each(function(){n("#document_doctype").val()===null||n("#document_doctype").val==""?n(this).show():n(this).hasClass("doctype-"+n("#document_doctype").val())?n(this).show():n(this).hide()}),n("#document_popup").dialog("open")},beforeSend:function(){}})}};return{init:o.init}}(jQuery);$(document).ready(function(){c.init()});
