var c=function(t){var e={isInitialized:!1,storage:{$table:null,$editDialog:null,dataTableApi:null},init:function(){if(e.isInitialized!==!0){if(e.storage.$table=t("#datatablelabels_list"),e.storage.$editDialog=t("#datatablelabels_edit"),e.storage.dataTableApi=e.storage.$table.dataTable().api(),e.storage.$table.length===0||e.storage.$editDialog.length===0)throw"Could not initialize DataTableLabelsUi. Required elements are missing.";e.initDialog(),e.registerEvents(),e.isInitialized=!0}},initDialog:function(){e.storage.$editDialog.dialog({modal:!0,bgiframe:!0,closeOnEscape:!1,minWidth:550,maxHeight:400,autoOpen:!1,buttons:[{text:"ABBRECHEN",click:function(){e.resetEditDialog(),e.closeEditDialog()}},{text:"SPEICHERN",click:function(){e.saveItem()}}],open:function(){var a=t("#datatablelabel_hexcolor"),l=t("#datatablelabel_title"),i=t("#datatablelabel_type"),o=i.val().length===0;l.trigger("focus"),a.val().length===0&&a.val("#000000").trigger("change"),l.on("keyup",function(){if(o){var d=t(this).val(),n=d.toLowerCase().replace(/[^a-z0-9_]+/g,"").substr(0,24);i.val(n)}})},close:function(){e.resetEditDialog()}})},registerEvents:function(){t(document).on("click",".datatablelabels-edit",function(a){a.preventDefault();var l=t(this).data("id");e.editItem(l)}),t(document).on("click",".datatablelabels-delete",function(a){a.preventDefault();var l=t(this).data("id");e.deleteItem(l)}),t(document).on("draw.dt",function(a,l){var i=l.sTableId,o=t("#"+i);o.find(".label-color-preview").each(function(d,n){var r=t(n),s=r.data("hexcolor");r.css("background-color",s)})})},createItem:function(){e.isInitialized===!1&&e.init(),e.resetEditDialog(),e.openEditDialog()},editItem:function(a){a=parseInt(a),!(isNaN(a)||a<=0)&&t.ajax({url:"index.php?module=datatablelabels&action=edit&cmd=get",data:{id:a},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(l){e.storage.$editDialog.find("#datatablelabel_id").val(l.data.id),e.storage.$editDialog.find("#datatablelabel_type").val(l.data.type),e.storage.$editDialog.find("#datatablelabel_title").val(l.data.title),e.storage.$editDialog.find("#datatablelabel_group").val(l.data.group_id),e.storage.$editDialog.find("#datatablelabel_hexcolor").val(l.data.hexcolor).trigger("change"),e.storage.$editDialog.dialog("open")},error:function(l){alert("Fehler: "+l.responseJSON.error)},complete:function(){App.loading.close()}})},saveItem:function(){t.ajax({url:"index.php?module=datatablelabels&action=edit&cmd=save",data:{id:t("#datatablelabel_id").val(),type:t("#datatablelabel_type").val(),title:t("#datatablelabel_title").val(),group:t("#datatablelabel_group").val(),hexcolor:t("#datatablelabel_hexcolor").val()},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(a){a.success===!0&&(e.resetEditDialog(),e.reloadDataTable(),e.closeEditDialog()),a.success===!1&&alert(a.error)},error:function(a){alert("Fehler: "+a.responseJSON.error)},complete:function(){App.loading.close()}})},deleteItem:function(a){var l=confirm("Wirklich löschen?");l!==!1&&t.ajax({url:"index.php?module=datatablelabels&action=edit&cmd=delete",data:{id:a},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(i){i.success===!0&&e.reloadDataTable(),i.success===!1&&alert("Unbekannter Fehler beim Löschen.")},error:function(i){alert("Fehler: "+i.responseJSON.error)},complete:function(){App.loading.close()}})},openEditDialog:function(){e.storage.$editDialog.dialog("open")},closeEditDialog:function(){e.storage.$editDialog.dialog("close")},resetEditDialog:function(){e.storage.$editDialog.find("#datatablelabel_id").val(""),e.storage.$editDialog.find("#datatablelabel_type").val(""),e.storage.$editDialog.find("#datatablelabel_title").val("").off("keyup"),e.storage.$editDialog.find("#datatablelabel_group").val(0),e.storage.$editDialog.find("#datatablelabel_hexcolor").val("")},reloadDataTable:function(){e.storage.dataTableApi.ajax.reload()}};return{init:e.init,createItem:e.createItem}}(jQuery),b=function(t){var e={isInitialized:!1,storage:{$table:null,$editDialog:null,dataTableApi:null},init:function(){if(e.isInitialized!==!0){if(e.storage.$table=t("#datatablelabels_automaticlabelslist"),e.storage.$editDialog=t("#datatablelabels_automaticlabelsedit"),e.storage.dataTableApi=e.storage.$table.dataTable().api(),e.storage.$table.length===0||e.storage.$editDialog.length===0)throw"Could not initialize DataTableLabelsUi. Required elements are missing.";e.initDialog(),e.registerEvents(),e.isInitialized=!0}},initDialog:function(){e.storage.$editDialog.dialog({modal:!0,bgiframe:!0,closeOnEscape:!1,minWidth:550,maxHeight:400,autoOpen:!1,buttons:[{text:"ABBRECHEN",click:function(){e.resetEditDialog(),e.closeEditDialog()}},{text:"SPEICHERN",click:function(){e.saveItem()}}],open:function(){t("#datatablelabel_automaticlabelname").trigger("focus")},close:function(){e.resetEditDialog()}})},registerEvents:function(){t(document).on("click",".datatablelabels-automaticlabeledit",function(a){a.preventDefault();var l=t(this).data("id");e.editItem(l)}),t(document).on("click",".datatablelabels-automaticlabeldelete",function(a){a.preventDefault();var l=t(this).data("id");e.deleteItem(l)})},createItem:function(){e.isInitialized===!1&&e.init(),e.resetEditDialog(),e.openEditDialog()},editItem:function(a){a=parseInt(a),!(isNaN(a)||a<=0)&&t.ajax({url:"index.php?module=datatablelabels&action=automaticlabelsedit&cmd=get",data:{id:a},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(l){e.storage.$editDialog.find("#datatablelabel_automaticlabelid").val(l.data.id),e.storage.$editDialog.find("#datatablelabel_automaticlabelname").val(l.data.labelname),e.storage.$editDialog.find("#datatablelabel_automaticlabelaction").val(l.data.action),e.storage.$editDialog.find("#datatablelabel_automaticlabelselection").val(l.data.selection),e.storage.$editDialog.find("#datatablelabel_automaticlabelproject").val(l.data.project),e.storage.$editDialog.dialog("open")},error:function(l){alert("Fehler: "+l.responseJSON.error)},complete:function(){App.loading.close()}})},saveItem:function(){t.ajax({url:"index.php?module=datatablelabels&action=automaticlabelsedit&cmd=save",data:{id:t("#datatablelabel_automaticlabelid").val(),labelname:t("#datatablelabel_automaticlabelname").val(),action:t("#datatablelabel_automaticlabelaction").val(),selection:t("#datatablelabel_automaticlabelselection").val(),project:t("#datatablelabel_automaticlabelproject").val()},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(a){a.success===!0&&(e.resetEditDialog(),e.reloadDataTable(),e.closeEditDialog()),a.success===!1&&alert(a.error)},error:function(a){alert("Fehler: "+a.responseJSON.error)},complete:function(){App.loading.close()}})},deleteItem:function(a){var l=confirm("Wirklich löschen?");l!==!1&&t.ajax({url:"index.php?module=datatablelabels&action=automaticlabelsedit&cmd=delete",data:{id:a},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(i){i.success===!0&&e.reloadDataTable(),i.success===!1&&alert("Unbekannter Fehler beim Löschen.")},error:function(i){alert("Fehler: "+i.responseJSON.error)},complete:function(){App.loading.close()}})},openEditDialog:function(){e.storage.$editDialog.dialog("open")},closeEditDialog:function(){e.storage.$editDialog.dialog("close")},resetEditDialog:function(){e.storage.$editDialog.find("#datatablelabel_automaticlabelid").val(""),e.storage.$editDialog.find("#datatablelabel_automaticlabelname").val("");var a=document.getElementById("datatablelabel_automaticlabelaction");a.selectedIndex=0;var l=document.getElementById("datatablelabel_automaticlabelselection");l.selectedIndex=0,e.storage.$editDialog.find("#datatablelabel_automaticlabelproject").val("")},reloadDataTable:function(){e.storage.dataTableApi.ajax.reload()}};return{init:e.init,createItem:e.createItem}}(jQuery);$(document).ready(function(){$("#datatablelabels_list").length>0&&c.init(),$("#datatablelabels_automaticlabelslist").length>0&&b.init()});
