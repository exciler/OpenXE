$(document).ready(function(){$("#artikel_onlineshops").on("afterreload",function(){var s=$("#artikel_onlineshops");if(s){var n=$("#artikel_onlineshops tbody tr");if(n){var l="",r=null;$(n).each(function(){$(this).find("img.exportbutton").on("click",function(){$(this).prev("input").val("export"),$(this).parents("form").first().attr("action",window.location.href.split("#")[0]+"#tabs-4"),$(this).parents("form").first().submit()}),$(this).find("img.importbutton").on("click",function(){$(this).prev("input").val("import"),$(this).parents("form").first().attr("action",window.location.href.split("#")[0]+"#tabs-4"),$(this).parents("form").first().submit()});var e=$(this).find("td span.aftershop");e&&$(e).each(function(){var i=$(this).html();i!=""&&(r=i);var o=$(".onlinshopbuttonONLINESHOPBUTTON"+i).first();if(o&&o!=null&&o.length>0){var t=$(o).clone();$(t).toggleClass("onlinshopbuttonONLINESHOPBUTTON"+i,!1),$(t).insertAfter(this),$(t).show(),$(t).toggleClass("hidden",!1),$(this).parent().find(".placeholderaftershop").toggleClass("hidden",!0),$(t).after("&nbsp;"),$(this).html("")}else $(this).remove(),l!=""&&(l+=","),l+=""+i})}),$("#artikel_onlineshops").loadingOverlay("show"),$.ajax({url:"index.php?module=artikel&action=edit&cmd=getshopbuttons",type:"POST",dataType:"json",data:{ids:l,firstid:r},success:function(e){if($("#artikel_onlineshops").loadingOverlay("remove"),typeof e.html<"u"&&e.html!=""){$("#shoptabelleafter").after(e.html);var i=$("#artikel_onlineshops").DataTable();i.ajax.reload()}else{var o=$(".placeholderimport").length;o>0&&o===$(".placeholderimport").next(".placeholderaftershop").length&&$(".placeholderaftershop").remove(),typeof e.hideallimportplaceholder<"u"&&$("#artikel_onlineshops tbody tr").find(".placeholderimport").toggleClass("hidden",!0),typeof e.hideallexportplaceholder<"u"&&$("#artikel_onlineshops tbody tr").find(".placeholderexport").toggleClass("hidden",!0),(typeof e.canimport<"u"||typeof e.canexport<"u")&&$("#artikel_onlineshops tbody tr > td  tr > td.idtd").each(function(){var t=$(this).data("id")+"";t&&(typeof e.canimport<"u"&&typeof e.hideallimportplaceholder>"u"&&(e.canimport.indexOf(t)>-1?($(this).find(".importbutton").toggleClass("hidden",!1),$(this).find(".placeholderimport").toggleClass("hidden",!0)):$(this).find(".placeholderimport").toggleClass("hidden",!1)),typeof e.canexport<"u"&&typeof e.hideallexportplaceholder>"u"&&(e.canexport.indexOf(t)>-1?($(this).find(".exportbutton").toggleClass("hidden",!1),$(this).find(".placeholderexport").toggleClass("hidden",!0)):$(this).find(".placeholderexport").toggleClass("hidden",!1)))})}},fail:function(){}})}}}),$("#artikel_onlineshops").trigger("afterreload")});
