import{d as B,f as T,r as D,B as F,a as I,A as w,u as e,o as H,p as m,e as a,t as p,w as C,k as E,x as b,c as M}from"../vue-DC0yt6en.js";import{s as z}from"../index.esm-CSd3prbL.js";import{s as J}from"../dropdown.esm-BsPQZKH3.js";import{s as K}from"../colorpicker.esm-Km-jUbKu.js";import{c as O}from"../vee-validate.esm-CDHvWIrO.js";import{a as S}from"../button.esm-DaA8si6D.js";import{a as y}from"../axios-Cm0UX6qg.js";import{A}from"../ajaxErrorHandler-BwWU8vup.js";import{r as N}from"../jqueryBridge-CQYx4hBB.js";import{b as U}from"../locales.yaml_vue_type_i18n_index_0_src_true_lang-CKrIs7ZX.js";import"../index.esm-DTA9bGEg.js";import"../index.esm-BPVgoXlU.js";const R={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},W=a("small",null,"Nur Kleinbuchstaben und Zahlen [a-z, 0-9]",-1),q=B({__name:"LabelEditor",props:{groups:Array},setup(r){var V,k;(V=document.querySelector("a.neubuttonlink"))==null||V.addEventListener("click",()=>o.value=0),(k=document.querySelector("#datatablelabels_list"))==null||k.addEventListener("click",s=>{if(s.target instanceof Element){let t=s.target.closest("a.datatablelabels-edit");o.value=parseInt((t==null?void 0:t.dataset.id)??"")||null}});const{t:l}=T(),o=D(null),{defineField:d,handleSubmit:g,resetForm:c}=O(),[i]=d("title"),[u]=d("type"),[f]=d("group_id"),[v]=d("hexcolor"),h=g(async s=>{await y.post("index.php?module=datatablelabels&action=edit&cmd=save",{...s,id:o.value}).catch(A).then(()=>{x(),N()})});F(async()=>{if(!o.value){c();return}await y.post("index.php?module=datatablelabels&action=edit&cmd=get",{id:o.value}).then(s=>c({values:s.data.data}))});const x=()=>o.value=null;return(s,t)=>(H(),I(e(z),{header:e(l)("common.edit"),visible:o.value!==null,modal:"","onUpdate:visible":x,style:{width:"900px"}},{footer:w(()=>[m(e(S),{label:e(l)("common.cancel").toUpperCase(),onClick:x},null,8,["label"]),m(e(S),{label:e(l)("common.save").toUpperCase(),onClick:e(h)},null,8,["label","onClick"])]),default:w(()=>[a("form",{onSubmit:t[4]||(t[4]=(...n)=>e(h)&&e(h)(...n))},[a("div",R,[a("label",null,p(e(l)("common.description")),1),a("div",null,[C(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>b(i)?i.value=n:null)},null,512),[[E,e(i)]])]),a("label",null,p(e(l)("type")),1),a("div",null,[C(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>b(u)?u.value=n:null)},null,512),[[E,e(u)]]),W]),a("label",null,p(e(l)("common.group")),1),a("div",null,[m(e(J),{modelValue:e(f),"onUpdate:modelValue":t[2]||(t[2]=n=>b(f)?f.value=n:null),options:r.groups,optionValue:"id",optionLabel:"title"},null,8,["modelValue","options"])]),a("label",null,p(e(l)("common.color")),1),m(e(K),{modelValue:e(v),"onUpdate:modelValue":t[3]||(t[3]=n=>b(v)?v.value=n:null),"default-color":"#000000"},null,8,["modelValue"])])],32)]),_:1},8,["header","visible"]))}});typeof U=="function"&&U(q);var L;const Z=JSON.parse((L=document.querySelector("#vueapp_props"))==null?void 0:L.textContent);M(q,Z).mount("#vueapp");var _;(_=document.querySelector("#datatablelabels_list"))==null||_.addEventListener("click",async r=>{if(r.target instanceof Element){let l=r.target.closest("a.datatablelabels-delete");if(l instanceof HTMLElement&&l.dataset.id){if(confirm("Wirklich lÃ¶schen?")===!1)return;await y.post("index.php?module=datatablelabels&action=edit&cmd=delete",{id:l.dataset.id}).catch(A).then(()=>N())}}});$(document).on("draw.dt",function(r,l){const o=l.sTableId;$("#"+o).find(".label-color-preview").each(function(g,c){const i=$(c),u=i.data("hexcolor");i.css("background-color",u)})});
