import{c as f}from"../vue-DC0yt6en.js";import{_ as d}from"../TimeManagementCalendar.vue_vue_type_script_setup_true_lang-CYvmVYkg.js";import{a as o}from"../axios-Cm0UX6qg.js";import{A as r}from"../userParameter-DRrWXyuO.js";import"../CalendarDefaults-BghndKM6.js";const l=function(e){u(e.start,e.end)},a=function(e){e.event.id>0?o.post("index.php?module=zeiterfassung&action=create&cmd=updatezeiterfassung",e.event).then(()=>n()):(alert("Eintrag kann nicht verschoben werden"),e.revert())},c=function(e){p(e.event.id)},u=function(e,i){$("#submitError").html(""),e==i?$("#editZeiterfassung").find("#bisZeit").val(""):$("#editZeiterfassung").find("#bisZeit").val($.format.date(i,"HH:mm")),$("#editZeiterfassung").find("#eventid").val(""),$("#editZeiterfassung").find("#datum").val($.format.date(e,"dd.MM.yyyy")),$("#editZeiterfassung").find("#vonZeit").val($.format.date(e,"HH:mm")),$("#editZeiterfassung").find("#aufgabe2").val(""),$("#editZeiterfassung").find("#beschreibung2").val(""),$("#editZeiterfassung").find("#ort").val(""),$("#editZeiterfassung").find("#art2").val("Arbeit"),$("#editZeiterfassung").find("#internerkommentar").val(""),$("#editZeiterfassung").find("#projekt_manuell2").val(""),$("#editZeiterfassung").find("#arbeitspaket2").val(""),$("#editZeiterfassung").find("#adresse_abrechnung2").val(""),$("#editZeiterfassung").find("#auftrag").val(""),$("#editZeiterfassung").find("#auftragpositionid").val(""),$("#editZeiterfassung").find("#produktion").val(""),$("#editZeiterfassung").find("#serviceauftrag").val(""),$(":button:contains('Löschen')").prop("disabled",!0).addClass("ui-state-disabled"),$(":button:contains('Kopieren')").prop("disabled",!0).addClass("ui-state-disabled"),$("#editZeiterfassung").dialog("open")},g=function(e){$(":button:contains('Löschen')").prop("disabled",!1).removeClass("ui-state-disabled"),$(":button:contains('Kopieren')").prop("disabled",!1).removeClass("ui-state-disabled"),$("#submitError").html(""),$("#editZeiterfassung").find("#eventid").val(e.id),$("#editZeiterfassung").find("#aufgabe2").val(e.aufgabe),$("#editZeiterfassung").find("#beschreibung2").val(e.beschreibung),$("#editZeiterfassung").find("#ort").val(e.ort),$("#editZeiterfassung").find("#art2").val(e.art),$("#editZeiterfassung").find("#internerkommentar").val(e.internerkommentar),$("#editZeiterfassung").find("#vonZeit").val(e.vonzeit),$("#editZeiterfassung").find("#bisZeit").val(e.biszeit),$("#editZeiterfassung").find("#datum").val(e.datum),$("#editZeiterfassung").find("#projekt_manuell2").val(e.projekt_manuell),$("#editZeiterfassung").find("#arbeitspaket2").val(e.arbeitspaket),$("#editZeiterfassung").find("#adresse_abrechnung2").val(e.adresse_abrechnung),$("#editZeiterfassung").find("#auftrag").val(e.auftrag),$("#editZeiterfassung").find("#auftragpositionid").val(e.auftragpositionid),$("#editZeiterfassung").find("#produktion").val(e.produktion),$("#editZeiterfassung").find("#serviceauftrag").val(e.serviceauftrag),e.abrechnen==1?$("#editZeiterfassung").find("#abrechnen2").prop("checked",!0):$("#editZeiterfassung").find("#abrechnen2").prop("checked",!1)},p=function(e){e>0&&$.ajax({url:"./index.php?module=zeiterfassung&action=create&cmd=getzeiterfassung&id="+e,dataType:"json",success:function(i){$("#editZeiterfassung").find("input, textarea").attr("disabled",!0),i.write==1?$("#editZeiterfassung").find("input, textarea").attr("disabled",!1):$("#editZeiterfassung").find("#titel").attr("disabled",!0),$("#editZeiterfassung").dialog("open"),g(i)},error:function(i,t,h){$("#submitError").html("Keine Event-Daten gefunden")}})};$("#aufgabe").autocomplete({source:"index.php?module=ajax&action=filter&filtername=zeiterfassungvorlage",select:function(e,i){$.ajax({url:"index.php?module=ajax&action=filter&filtername=zeiterfassungvorlagedetail",data:{vorlage:i.item.label},method:"post",dataType:"json",success:function(t){$("#beschreibung").val(t[0]),$("#art").val(t[1]),$("#projekt_manuell").val(t[2]),$("#arbeitspaket").val(t[3]),t[4]==0&&(t[4]=""),$("#adresse_abrechnung").val(t[4]),$("#abrechnen").prop("checked",t[5]==1)}})}});$("#aufgabe2").autocomplete({source:"index.php?module=ajax&action=filter&filtername=zeiterfassungvorlage",select:function(e,i){$.ajax({url:"index.php?module=ajax&action=filter&filtername=zeiterfassungvorlagedetail",data:{vorlage:i.item.label},method:"post",dataType:"json",success:function(t){$("#beschreibung2").val(t[0]),$("#art2").val(t[1]),$("#projekt_manuell2").val(t[2]),$("#arbeitspaket2").val(t[3]),t[4]==0&&(t[4]=""),$("#adresse_abrechnung2").val(t[4]),$("#abrechnen2").prop("checked",t[5]==1)}})}});$("#projekt_manuell").autocomplete({source:"index.php?module=ajax&action=filter&filtername=projektname",select:function(e,i){$.ajax({url:"index.php?module=ajax&action=filter&filtername=zeiterfassungprojektdetail",data:{projekt:i.item.label},method:"post",dataType:"json",success:function(t){t[0]&&$("#adresse_abrechnung").val(t[0])}})}});$("#projekt_manuell2").autocomplete({source:"index.php?module=ajax&action=filter&filtername=projektname",select:function(e,i){$.ajax({url:"index.php?module=ajax&action=filter&filtername=zeiterfassungprojektdetail",data:{projekt:i.item.label},method:"post",dataType:"json",success:function(t){t[0]&&$("#adresse_abrechnung2").val(t[0])}})}});$("#art2").change(function(){this.value!="Arbeit"?$("#aufgabe2").val(this.value):$("#aufgabe2").val(""),$("#beschreibung2").val("")});$("#editZeiterfassung").dialog({autoOpen:!1,height:750,width:650,modal:!0,buttons:{Speichern:function(){var e="";$("#editZeiterfassung").find("#datum").val()==""&&(e="Geben Sie bitte ein Datum ein."),$("#editZeiterfassung").find("#aufgabe2").val()==""&&(e="Geben Sie bitte eine Aufgabe ein."),$("#editZeiterfassung").find("#vonZeit").val()==""&&(e="Geben Sie bitte Von-Zeit ein."),$("#editZeiterfassung").find("#bisZeit").val()==""&&(e="Geben Sie bitte Bis-Zeit ein."),e!=""?$("#submitError").html('<div class="error">'+e+"</div>"):v()},Löschen:function(){confirm("Soll dieser Eintrag wirklich gelöscht werden?")&&($.ajax({url:"index.php?module=zeiterfassung&action=create&cmd=delzeiterfassung",data:{id:$("#editZeiterfassung").find("#eventid").val()},method:"post",dataType:"json",success:function(e){e.status==1?($("#editZeiterfassung").dialog("close"),n()):alert(e.statusText)}}),$(this).dialog("close"))},Kopieren:function(){confirm("Soll dieser Eintrag wirklich kopiert werden?")&&($.ajax({url:"index.php?module=zeiterfassung&action=create&cmd=copyzeiterfassung",data:{id:$("#editZeiterfassung").find("#eventid").val()},method:"post",dataType:"json",success:function(e){e.status==1?($("#editZeiterfassung").dialog("close"),n()):alert(e.statusText)}}),$(this).dialog("close"))},Abbrechen:function(){$(this).dialog("close")}},close:function(){ResetMode()}});function v(){$.ajax({url:"index.php?module=zeiterfassung&action=create&cmd=savezeiterfassung",data:{id:$("#editZeiterfassung").find("#eventid").val(),datum:$("#editZeiterfassung").find("#datum").val(),start:$("#editZeiterfassung").find("#vonZeit").val(),end:$("#editZeiterfassung").find("#bisZeit").val(),aufgabe:$("#editZeiterfassung").find("#aufgabe2").val(),beschreibung:$("#editZeiterfassung").find("#beschreibung2").val(),ort:$("#editZeiterfassung").find("#ort").val(),art:$("#editZeiterfassung").find("#art2").val(),internerkommentar:$("#editZeiterfassung").find("#internerkommentar").val(),projekt_manuell:$("#editZeiterfassung").find("#projekt_manuell2").val(),arbeitspaket:$("#editZeiterfassung").find("#arbeitspaket2").val(),adresse_abrechnung:$("#editZeiterfassung").find("#adresse_abrechnung2").val(),auftrag:$("#editZeiterfassung").find("#auftrag").val(),auftragpositionid:$("#editZeiterfassung").find("#auftragpositionid").val(),produktion:$("#editZeiterfassung").find("#produktion").val(),serviceauftrag:$("#editZeiterfassung").find("#serviceauftrag").val(),abrechnen:$("#editZeiterfassung").find("#abrechnen2").prop("checked")?1:0},method:"post",dataType:"json",beforeSend:function(){App.loading.open()},success:function(e){App.loading.close(),e.status==1?($("#editZeiterfassung").dialog("close"),n(),$("#editZeiterfassung").find("#beschreibung2").val("")):alert(e.statusText)}})}var s;(s=document.querySelector(".vueAction[data-action=create]"))==null||s.addEventListener("click",()=>{u(new Date,new Date)});const n=()=>b.$refs.fullCalendar.getApi().refetchEvents();r("zeiterfassung_buchen_termine","zeiterfassung_buchen_termine",n);r("zeiterfassung_buchen_stechuhr","zeiterfassung_buchen_stechuhr",n);const m={events:"./index.php?module=zeiterfassung&action=create&cmd=data",select:l,eventClick:c,eventDrop:a,eventResize:a},b=f(d,{options:m}).mount("#vueapp_calendar");
