var d=function(t){var o={storage:{},init:function(){t("#document_popup").dialog({modal:!0,autoOpen:!1,minWidth:800,title:"",buttons:{ABBRECHEN:function(){t(this).dialog("close")},SPEICHERN:function(){t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=savedocument",type:"POST",dataType:"json",data:{id:t("#document_id").val(),doctype:t("#document_doctype").val(),content:t("#document_content").val(),active:t("#document_active").prop("checked")?1:0,project:t("#document_project").val(),fontstyle:t("#document_fontstyle").val(),alignment:t("#document_alignment").val()},success:function(n){typeof n.status<"u"&&n.status==1?(t("#company_document_setting").DataTable().ajax.reload(),t("#document_popup").dialog("close")):alert(n.statusText)},beforeSend:function(){}})}},close:function(n,e){}}),o.registerEvents(),t("#translation_popup").dialog({modal:!0,autoOpen:!1,minWidth:800,title:"",buttons:{ABBRECHEN:function(){t(this).dialog("close")},SPEICHERN:function(){t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=savetranslation",type:"POST",dataType:"json",data:{parent_id:t("#document_id").val(),language:t("#language").val(),doctype:t("#document_doctype").val(),content:t("#translationcontent").val(),active:t("#active").prop("checked")?1:0,fontstyle:t("#document_translation_fontstyle").val(),alignment:t("#document_translation_alignment").val()},success:function(n){t("#translation_popup").dialog("close")},beforeSend:function(){}})}},close:function(n,e){}}),t("#language").on("change",function(){t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=loadtranslation",type:"POST",dataType:"json",data:{language:t(this).val(),parent_id:t("#document_id").val()},success:function(n){typeof n.id<"u"&&n.id!="0"&&(t("#active").prop("checked",n.active),t("#translationcontent").val(n.content),t("#document_translation_fontstyle").val(n.fontstyle),t("#document_translation_alignment").val(n.alignment))},beforeSend:function(){}})}),t("button.getelements").on("click",function(){t(t("#document_preview option:selected")).each(function(){var n=t("#document_content");(t(n).val()+"").indexOf("{"+t(this).val()+"}")<0&&t(n).val(t(n).val()+(t(n).val()+""==""?"":`
`)+t(this).text()+":|{"+t(this).val()+"}")})}),t("button.gettranslationelements").on("click",function(){t(t("#document_translation_preview option:selected")).each(function(){var n=t("#translationcontent");(t(n).val()+"").indexOf("{"+t(this).val()+"}")<0&&t(n).val(t(n).val()+(t(n).val()+""==""?"":`
`)+t(this).text()+":|{"+t(this).val()+"}")})}),t("img.translate").on("click",function(){o.openTranslation(t(this).data("document"))}),t("input.edit").on("click",function(){o.openDocument(t(this).data("id"))}),t("input#selectall").on("change",function(){t("#company_document_setting input:checkbox").prop("checked",t(this).prop("checked"))}),t("#doaction").on("click",function(){if(t("#actionselection").val()!==""&&t("#company_document_setting :checked").length){var n=[];t("#company_document_setting :checked").each(function(){n.push(t(this).val())}),t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=changestatus",type:"POST",dataType:"json",data:{action:t("#actionselection").val(),ids:n},success:function(e){t("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})}}),t("#document_doctype").on("change",function(){t("#document_preview option").each(function(){t(this).hasClass("doctype-"+t("#document_doctype").val())?t(this).show():t(this).hide()})})},registerEvents:function(){t(document).on("click",".companydocument-edit",function(n){n.preventDefault();var e=t(this).data("companydocumentId");o.openDocument(e)}),t(document).on("click",".companydocument-copy",function(n){n.preventDefault();var e=t(this).data("companydocumentId");o.copyInfoBlock(e)}),t(document).on("click",".companydocument-delete",function(n){n.preventDefault();var e=t(this).data("companydocumentId");o.deleteInfoBlock(e)})},openTranslation:function(n){t("#doctype").val(n),t("#language").trigger("change"),t("#translation_popup").dialog("open")},deleteInfoBlock:function(n){n&&confirm("Wirklich lÃ¶schen?")&&t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=deleteinfoblock",type:"POST",dataType:"json",data:{id:n},success:function(e){t("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})},copyInfoBlock:function(n){n&&confirm("Wirklich kopieren?")&&t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=copyinfoblock",type:"POST",dataType:"json",data:{id:n},success:function(e){t("#company_document_setting").DataTable().ajax.reload()},beforeSend:function(){}})},openDocument:function(n){t("#document_id").val(n),n?t("img#opentranlation").show():t("img#opentranlation").hide(),t.ajax({url:"index.php?module=firmendaten&action=documentsettings&cmd=loaddocument",type:"POST",dataType:"json",data:{id:n},success:function(e){t("#document_active").prop("checked",e.active),t("#document_doctype").val(e.doctype),t("#document_content").val(e.content),t("#document_project").val(e.project),t("#document_fontstyle").val(e.fontstyle),t("#document_alignment").val(e.alignment),t("#document_preview option").each(function(){t("#document_doctype").val()===null||t("#document_doctype").val==""?t(this).show():t(this).hasClass("doctype-"+t("#document_doctype").val())?t(this).show():t(this).hide()}),t("#document_popup").dialog("open")},beforeSend:function(){}})}};return{init:o.init}}(jQuery);$(document).ready(function(){d.init()});function u(t){var o="abcdefghijklmnopqrstuvwxyz",n="123456789",e="!@#_",c="",i=t/2,i=i-1,l=t-i-i;let a;for(a=0;a<i;a++)c+=o.charAt(Math.floor(Math.random()*o.length));for(a=0;a<l;a++)c+=e.charAt(Math.floor(Math.random()*e.length));for(a=0;a<i;a++)c+=n.charAt(Math.floor(Math.random()*n.length));return c=c.split("").sort(function(){return .5-Math.random()}).join(""),c}document.querySelector("#genkeybutton").addEventListener("click",()=>{document.querySelector("#devicekey").value=u(48)});
